# 部分数据结构知识点题单

## 点分治 

~~POJ 1741~~ 模板题

~~洛谷P2634~~  聪明可可 模板题

~~2019 沈阳网络赛D题~~ 稍微修改一下统计的量

~~IOI 2011~~ Race 

洛谷P2644 树上游戏

~~HDU 4812~~ 2013 长沙

## 树链剖分 

~~BZOJ 2243~~	剖分向上跳的时候分类讨论一下分左右注意一下细节

## 树上启发式合并（DSU on tree）

~~CF 600E~~	模板题

~~CF 570D~~	每次询问一个子树内深度为固定值的点上的字符是否能重排为一个回文串，维护深度信息，每个固定深度出现奇次数的字母的个数

~~CF 246E~~

~~CF 208E~~

IOI 2011 Race

CF 291E

~~CF 1009F~~

CF 343D

CF 375D

CF 716E

CF 741D

~~2019 ICPC Nanchang Onsite K题~~	dsu on tree+平衡树/动态开点权值线段树

~~2020 wannafly winter camp day 2 E题~~ 	dsu on tree+set维护前驱后继

## 平衡树

~~BZOJ 3224~~	平衡树模板题	插入、删除、求第K大、求排名、求前驱、后继

~~BZOJ 1588~~	平衡树基本操作裸题	查找前驱后继

~~BZOJ  1208~~	平衡树基本操作裸题	查找前驱后继

~~BZOJ 1503~~（NOI 2004）加了一个全局增加和减少，维护一个全局变量delta即可，题意理解上有一个小问题

~~BZOJ 2733~~	并查集+Splay启发式合并，据说按中序遍历启发式合并复杂度是只有一个log的

~~BZOJ 3223~~	Splay 区间翻转	这个对我来说一开始理解起来有一定困难，看起来违背了二叉搜索树的性质，感觉更多的是在利用位置关系，然后区间操作打lazy标记就行了，一个小trick是优化建树，看来中序遍历对平衡树很有用啊

~~BZOJ 1251~~	区间Splay，区间翻转+区间加+区间查询最值，开始有点明白Splay打标记的一些规律了

~~BZOJ 1500~~	区间Splay，区间插入，区间删除，区间覆盖，区间翻转，区间查询总和，全局查询最大子段和

应该是这种类型的Splay题的战斗力天花板了，关键的地方是区间翻转会对查询最大子段和有影响，这个非常容易忽视。然后一个小trick是内存回收。

~~BZOJ 1112~~	可以用主席树写，也可以用Splay写，从左到右动态维护当前区间，找中位数就可以了，其余都一样

## 可持久化线段树

入门级别：

POJ 2104/HDU 2665	模板题	区间第K大

SPOJ COT/BZOJ 2588	模板题	树上主席树，树上路径点权第K大

HDU 3727	模板题	区间第K大，以及求某个值是区间第几大

HDU 4417	模板题	询问区间第几大

HDU 4866/BZOJ 3932	模板题	询问区间前K小的总和

HDU 5678	模板题	询问子树权值中位数	dfs序之后区间第K大

SDOI 2009 HH的项链	模板题	区间内不同的数字个数，不过对常数有一定要求，因为不要求在线，所以离线用树状数组更快

~~BZOJ 1112~~	区间查询中位数，区间统计小于等于某个数的个数和总和

基础级别：

HDU 5919	根据题目的转化后只需要倒插主席树，求区间内不同的数的个数，以及区间第K大

BZOJ 3207	字符串哈希之后查找区间内某个数是否存在

FJOI 2016 神秘数	发现性质之后查找区间内小于等于某个数的数的总和



## 树套树

人生中第一个树套树：

~~BZOJ 3196~~ 线段树套平衡树	求区间内第K大，求区间内排名，单点修改，求区间内前驱后继

~~2019 ICPC 徐州现场赛 H题~~	FJOI 2016加强版（增加单点修改），线段树套平衡树，求区间内小于等于某个数的总和，平衡树每个节点再维护一个sum。

人生中第一个树状数组套动态开点权值线段树：

~~BZOJ 3295	动态逆序对~~	BZOJ上空间卡得贼紧，跟着yyb学着能不开点就不开点

~~BZOJ 1901	动态第K大~~ 

~~BZOJ 1146~~	CTSC 2008	树上带修改路径点权第K大，我的做法是3个log的——树链剖分+树状数组套动态开点权值线段树

~~BZOJ 2141~~	动态逆序对	树套树裸题，细节写残了好久

~~BZOJ 3262~~	三维偏序	排序+树套树维护三维偏序 需要特判完全相同的情况

~~BZOJ 2120~~	动态维护区间内不同的数字个数	树套树+set



## 整体二分

~~BZOJ 2738~~	整体二分+二维树状数组

~~BZOJ 2527~~	整体二分

整体二分的题可以这么想，一次二分的复杂度是够的，但是多次二分就不够了，所以整体一起移动。

~~LOJ  2402~~	THUPC 2017

整体二分，思路跟BZOJ 2527极像，只不过把区间修改，单点查询变成了单点修改，区间查询

被坑了很久的细节是木板可能一直没有被射穿，所以最后solve传参的时候应该是m+1而不是m

~~BZOJ 3110~~ ZJOI 2013	可以认为是整体二分模板题了啊

内层需要的是区间加和区间和查询，依然是树状数组就OK了

BZOJ 2674

~~BZOJ 2161~~	挺淳朴的，需要注意是找区间内的点还是找包含点的区间，被卡常了，不过主要原因是离散化之后要立刻覆盖掉原先的值

## CDQ分治

人生中第一个CDQ分治：

~~BZOJ 3262~~	三维偏序，之前用树套树A了，现在用CDQ分治过了~

果然比树套树快

~~BZOJ 1176~~	CDQ分治，内层是一个二维矩形数点，扫描线的感觉，把矩形拆成左右两条竖线，排序之后跟点一起双指针扫过去统计前缀和即可

## 莫队系列

~~SPOJ - DQUERY~~

~~洛谷 P2709~~ 小B的询问/BZOJ 3781

~~BZOJ 2038~~ 小Z的袜子(hose)

~~HDU 6333~~ Problem B. Harvest of Apples 18多校 莫队+组合数学

~~BZOJ 3289~~ Mato的文件管理 （区间逆序对）

~~HDU 6278~~ Just $h$-index CCPC 2018湘潭邀请赛 准金牌题

~~HDU 5145~~ NPY and girls 

~~CF 617E~~ XOR and Favorite Number 

~~CF 220B~~ Little Elephant and Array 

~~HDU 5213~~ Lucky 

~~CF 86D~~ Powerful array

~~洛谷 P3709~~ 大爷的字符串题 区间众数 用线段树会T 需要巧妙地维护信息省掉一个log

~~51Nod 1290~~ 区间逆序对，几乎是19湘潭的原题

~~CF 940F~~ 带修改莫队

~~UVA 12345~~ 带修改莫队例题

## 分块

~~BZOJ 2724~~	在线求区间众数

~~BZOJ 3343~~	区间加，区间查询大于等于某个数的个数

~~BZOJ 2821~~	区间统计出现偶数次的数的个数，强制在线

~~BZOJ 3744~~	在线求区间逆序对	树状数组+前缀后缀维护



## 可持久化Trie

~~BZOJ 3161~~	区间最大异或和	模板题

BZOJ 4477	树上可持久化Trie（BZOJ上WA了但在洛谷上过了）

~~BZOJ 2741~~	分块+可持久化Trie	转化之后就是区间内找两个数异或起来最大

~~BZOJ 4896~~	可持久化Trie上维护前缀最大cnt和实际cnt，然后二分一下就好了

~~BZOJ 5338~~	dfs序+树链剖分+可持久化Trie裸题

~~BZOJ 4103~~	可持久化Trie树上找第K大，类似在主席树上“二分”找第K大的感觉，又有点类似树套树中log个点一起移动的感觉，这样可以省掉一个log

~~BZOJ 3166~~	找到所有可能出现在当前点作为区间次大值的区间的点所构成的区间,（往前数两个大于的+1~往后数两个大于的-1）然后就是可持久化Trie找区间异或最大的事了

